<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>subjoins</title>
  <meta name="description" content="Join from a parent class to associations defined in subclasses.">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/2016/09/21/subjoins.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">Your awesome title</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">subjoins</h1>
    <p class="post-meta"><time datetime="2016-09-21T22:55:36-04:00" itemprop="datePublished">Sep 21, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h2 id="join-from-a-parent-class-to-associations-defined-in-subclasses">Join from a parent class to associations defined in subclasses.</h2>

<p><a href="#tl-dr-subjoins">tl; dr</a></p>

<p>I use <a href="http://eewang.github.io/blog/2013/03/12/how-and-when-to-use-single-table-inheritance-in-rails/">single table inheritance</a>. A lot. Maybe more than I should. But that’s not the point.</p>

<p>We have a <code class="highlighter-rouge">User</code> class, that has subclasses such as <code class="highlighter-rouge">Admin</code>, <code class="highlighter-rouge">Contractor</code>, and <code class="highlighter-rouge">Client</code>. <code class="highlighter-rouge">Contractor</code> has an association: <code class="highlighter-rouge">has_one :profile</code>, which contains some useful info. Often times I’ll be accessing a whole bunch of Users that I know are all Contractors. Say, <code class="highlighter-rouge">project.users.where(type: "Contractor")</code>. Well doesn’t it make sense at this point that I should be able to join to <code class="highlighter-rouge">:profile</code> now that I’m dealing with only <code class="highlighter-rouge">Contractor</code>s?</p>

<p>Well for this basic case, that’s really quite easy: <code class="highlighter-rouge">Contractor.all.merge(project.users).joins(:profile)</code></p>

<p>In fact, we can easily make this another <a href="blog/2016/06/03/secret/">secret extension</a>:</p>

<p>```ruby active_record_extension.rb
    def as_subclass(subclass)
      subclass.all.merge(self.all)
    end</p>
<div class="highlighter-rouge"><pre class="highlight"><code>
Great! We're done here.

Or are we?

So you might have noticed that this method will in fact force the `type == 'Contractor'` requirement on your query even if you didn't do so youself. Well now that gets me thinking. Can we `LEFT JOIN` to profile on a collection of `User`s that aren't all `Contractor`s? That is, `User`s that happen to be `Contractor`s (and have a profile, which is all of them) will get joins to a `:profile` record, while others will have `NULL` for those joined columns.

Why, yes. Yes we can. Once again we will make heavy use of [arel](http://jpospisil.com/2014/06/16/the-definitive-guide-to-arel-the-sql-manager-for-ruby.html), to the point that even this link doesn't cover all of what we need to know. To the point that I'm still not quite sure what to do about through associations, but maybe I'll come back another time to update this post when I figure that out.

&lt;a name="tl-dr-subjoins"&gt;&lt;/a&gt;

```ruby
User.activate_secret_extensions.subjoins(:profile).to_sql
# =&gt; "SELECT `users`.* FROM `users` 
#     LEFT OUTER JOIN `admin_profiles` ON `users`.`type` IN ('Admin') AND `admin_profiles`.`user_id` = `users`.`id` 
#     LEFT OUTER JOIN `contractor_profiles` ON `users`.`type` IN ('Contractor') AND `contractor_profiles`.`user_id` = `users`.`id`
#     WHERE (users.deleted = false)"
</code></pre>
</div>

<p>Oh, did I mention that <code class="highlighter-rouge">Admin</code> also has a <code class="highlighter-rouge">:profile</code> assocaition too that is defined differently using a different table? And that this solution <code class="highlighter-rouge">LEFT JOIN</code>s to both tables appropriately? Oh, no? Well it does.</p>

<p>Here’s how we accomplish this:</p>

<p>```ruby active_record_extension.rb
    # currently does not work with :through associations
    def subjoins(association)
      associations = descendants.map{|klass| [klass, klass.reflect_on_association(association)]}.to_h.select{|klass, assoc| assoc.present?}
      associations.keys.none?{|assoc| assoc.is_a?(ActiveRecord::Reflection::ThroughReflection)} or raise NotImplementedError, “NIY for through associations”</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  bind_values = []
  arel = self.all.arel
  associations.group_by{|klass, assoc| assoc.klass.base_class}.each do |foreign_klass, assocs|
    conditions = assocs.map do |klass, assoc|
      join_arel = klass.joins(assoc.name).arel
      join_condition = join_arel.join_sources.last.right.expr
      bind_values += join_arel.bind_values
      self.arel_table[self.inheritance_column].in([klass.name, *klass.subclasses.map(&amp;:name)]).and(join_condition)
    end.reduce(&amp;:or)

    arel = arel.join(foreign_klass.arel_table, Arel::Nodes::OuterJoin).on(conditions)
  end
  result = self.all
  result = result.joins(*arel.join_sources) if arel.join_sources.present?
  bind_values.each{|val| result = result.bind(val)}
  return result
end   end ```
</code></pre>
</div>

<p>Let’s break this down.</p>

<p>Considering only <code class="highlighter-rouge">Contractor</code> for the moment, We want to do a <code class="highlighter-rouge">LEFT JOIN</code> on <code class="highlighter-rouge">contractor_profiles</code> where the user is a <code class="highlighter-rouge">Contractor</code> AND the profile’s <code class="highlighter-rouge">user_id</code> matches.</p>

<p>Generalizing, we need to find the subclass, or subclasses, that contain the association named <code class="highlighter-rouge">:profile</code>, and to a <code class="highlighter-rouge">LEFT JOIN</code> for each associations. Like I often do, I’m going to make Rails do the heavy lifting of generating the join conditions, and I’ll step in only to direct the orchestra of hack. So where do we start?</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">associations</span> <span class="o">=</span> <span class="n">descendants</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span><span class="n">klass</span><span class="o">|</span> <span class="p">[</span><span class="n">klass</span><span class="p">,</span> <span class="n">klass</span><span class="p">.</span><span class="nf">reflect_on_association</span><span class="p">(</span><span class="n">association</span><span class="p">)]}.</span><span class="nf">to_h</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span><span class="n">klass</span><span class="p">,</span> <span class="n">assoc</span><span class="o">|</span> <span class="n">assoc</span><span class="p">.</span><span class="nf">present?</span><span class="p">}</span>
</code></pre>
</div>

<p>This selects descendants that have the named assocaition (via the awesomely named <code class="highlighter-rouge">reflect_on_association</code> method, which safely returns <code class="highlighter-rouge">nil</code> when the association is not defined). The output here is a Hash where the keys are subclasses and the values are the associations: <code class="highlighter-rouge"><span class="p">{</span><span class="err">Contractor</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">#&lt;assocation&gt;,</span><span class="w"> </span><span class="err">Admin</span><span class="w"> </span><span class="err">=&gt;</span><span class="w"> </span><span class="err">#&lt;association&gt;</span><span class="p">}</span></code></p>

<p>Now that we have the full list of associations linked to each subclass, we need to combine them. As the full solution hinted, we need to combine the join conditions (e.g. <code class="highlighter-rouge">contracotor_profiles.user_id = users.id</code>) with the condition that <code class="highlighter-rouge">users.type = 'Contractor'</code>. Or, more throughly, <code class="highlighter-rouge">users.type IN (#{list of Contractor subtypes})</code>. This is acomplished via the line</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">self</span><span class="p">.</span><span class="nf">arel_table</span><span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="nf">inheritance_column</span><span class="p">].</span><span class="nf">in</span><span class="p">([</span><span class="n">klass</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="o">*</span><span class="n">klass</span><span class="p">.</span><span class="nf">subclasses</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)]).</span><span class="nf">and</span><span class="p">(</span><span class="n">join_condition</span><span class="p">)</span><span class="sb">`
</span></code></pre>
</div>

<p>Here, the part before the <code class="highlighter-rouge">and</code> gives us the type condition, but using the inheritance column because it’s possible to set that to something other than <code class="highlighter-rouge">"type"</code>. It finds all the subclasses and dumps them into the the <code class="highlighter-rouge">IN</code> operator as we said we should. Note that in your developemnt environment, due to lazy-loading, this list is empty until you explicitly load subclasses, so you have to do that first for this to work. Simply instantiate their classes and Rails will do that for you.</p>

<p>After the <code class="highlighter-rouge">and</code>, we use <code class="highlighter-rouge">join_condition</code>, which is defined above. Specifically, it is the correct join condition generated by <code class="highlighter-rouge">Contractor.joins(:profile)</code>. Letting Rails do the correct generation of that join condition depending on the association type, we can get that using</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">join_arel</span> <span class="o">=</span> <span class="n">klass</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="n">assoc</span><span class="p">.</span><span class="nf">name</span><span class="p">).</span><span class="nf">arel</span>
<span class="n">join_condition</span> <span class="o">=</span> <span class="n">join_arel</span><span class="p">.</span><span class="nf">join_sources</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">right</span><span class="p">.</span><span class="nf">expr</span>
</code></pre>
</div>

<p>Now what’s up with <code class="highlighter-rouge">last.right.expr</code>? To be honest, this is something of a best guess. As far as I can tell, <code class="highlighter-rouge">join_sources</code> is an array with one element per table joined table. For a direct (not <code class="highlighter-rouge">:through</code>) associations, this seems to be a 1-element Array. For a <code class="highlighter-rouge">:through</code> associations, the intermediate tables come first. So while we’re not yet supporting through associations, I’m just going to remind myself of that by selecting <code class="highlighter-rouge">join_sources.last</code>. From here, we have <code class="highlighter-rouge">left</code> and <code class="highlighter-rouge">right</code>, where  <code class="highlighter-rouge">joins_sources.last.left</code> is the arel table being joined to, and <code class="highlighter-rouge">joins_sources.last.right</code> is the condition ON which this join is predicated. To illustrate:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Contractor</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:profile</span><span class="p">).</span><span class="nf">join_sources</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">right</span><span class="p">.</span><span class="nf">to_sql</span>
<span class="c1"># =&gt; "ON `contractor_profiles`.`user_id` = `users`.`id`"</span>
</code></pre>
</div>

<p>This is the part we want, so this is the part we’ve taken. Lastly, we need just the expression without the <code class="highlighter-rouge">ON</code> operator, since we’re going to use that operator ourselves. Thus, <code class="highlighter-rouge">join_arel.join_sources.last.right.expr</code>.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Contractor</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:profile</span><span class="p">).</span><span class="nf">join_sources</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">right</span><span class="p">.</span><span class="nf">expr</span><span class="p">.</span><span class="nf">to_sql</span>
 <span class="o">=&gt;</span> <span class="s2">"`contractor_profiles`.`user_id` = `users`.`id`"</span>
</code></pre>
</div>

<p>So that’s how we get the join conditions for each assocaition, combining a type condition with the appropriate join condition for that type, and storing this new combination in the variable <code class="highlighter-rouge">conditions</code>. We then add this to the join stack using</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">arel</span> <span class="o">=</span> <span class="n">arel</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">foreign_klass</span><span class="p">.</span><span class="nf">arel_table</span><span class="p">,</span> <span class="no">Arel</span><span class="o">::</span><span class="no">Nodes</span><span class="o">::</span><span class="no">OuterJoin</span><span class="p">).</span><span class="nf">on</span><span class="p">(</span><span class="n">conditions</span><span class="p">)</span>
</code></pre>
</div>

<p>where <code class="highlighter-rouge">foreign_klass</code> is the class of the association, defined by the outer loop.</p>

<p>Ok so what the heck is the outer loop?</p>

<p><code class="highlighter-rouge">associations.group_by{|klass, assoc| assoc.klass.base_class}</code> groups all the the descendants’ assocations by their base_class. This accounts for the fact that some subclasses’ associations by the same name could be to the same table, where only one <code class="highlighter-rouge">JOIN</code> is needed for the group of them. In our first example with <code class="highlighter-rouge">AdminProfile</code> vs <code class="highlighter-rouge">ClientProfile</code> case, these were different tables, and we needed a <code class="highlighter-rouge">JOIN</code> for each. To illustrate the case for grouping, consider two subclasses of a <code class="highlighter-rouge">Service</code> class: <code class="highlighter-rouge">TrancsriptionService</code> and <code class="highlighter-rouge">AlignmentServivce</code>. Both of these have an <code class="highlighter-rouge">:output_transcript</code> association, defined separately, but both of these associations are of the <code class="highlighter-rouge">Transcript</code> class:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Service</span><span class="p">.</span><span class="nf">activate_secret_extensions</span><span class="p">.</span><span class="nf">subjoins</span><span class="p">(</span><span class="ss">:output_transcript</span><span class="p">).</span><span class="nf">to_sql</span>
<span class="c1"># =&gt; SELECT `services`.* FROM `services`</span>
<span class="c1">#    LEFT OUTER JOIN `transcripts` ON (</span>
<span class="c1">#      `services`.`type` IN ('AlignmentService') AND `transcripts`.`service_id` = `services`.`id` AND `transcripts`.`type` IN ('AlignedTranscript') AND `transcripts`.`archived` = 0 </span>
<span class="c1">#    OR</span>
<span class="c1">#      `services`.`type` IN ('TranscriptionService') AND `transcripts`.`service_id` = `services`.`id` AND `transcripts`.`type` IN ('TranscribedTranscript') AND `transcripts`.`archived` = 0</span>
<span class="c1">#    )</span>
<span class="c1">#    WHERE (services.deleted = 0)</span>
</code></pre>
</div>

<p>Notice that only one <code class="highlighter-rouge">LEFT OUTER JOIN</code> was generated for this example, but that the conditions for the two associations were <code class="highlighter-rouge">OR</code>‘d together using the <code class="highlighter-rouge">reduce(&amp;:or)</code>, allowing us to join to both association types in the same <code class="highlighter-rouge">JOIN</code>. This is because we’ve collected all the join_conditions for the group associatied with the <code class="highlighter-rouge">Transcript</code> base_class and imposed them all in one go. Go us!</p>

<p>Piecing it all together, we return <code class="highlighter-rouge">self.all.joins(*arel.join_sources)</code> at the end, and this gives us our grand total joins query that accounts for the subclass-specific associations! (Though we’re safe about it and only do the joins if there are things to join to – ActiveRecord will complian otherwise.)</p>

<p>Ok, one last thing. What are these <code class="highlighter-rouge">bind_values</code>? Well, you may have noticed a few default scopes in the last example: <code class="highlighter-rouge">archived = 0</code> and <code class="highlighter-rouge">deleted = 0</code>. These are generated using “bind values”, which I am very unable to find good documentation on. However, notice:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="no">TranscriptionService</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:output_transcript</span><span class="p">).</span><span class="nf">arel</span><span class="p">.</span><span class="nf">join_sources</span><span class="p">.</span><span class="nf">last</span><span class="p">.</span><span class="nf">to_sql</span>
 <span class="c1"># =&gt; "INNER JOIN `threeplay_transcripts` ON `threeplay_transcripts`.`service_id` = `services`.`id` AND `threeplay_transcripts`.`type` IN ('TranscribedTranscript') AND `threeplay_transcripts`.`archived` = ?"</span>
</code></pre>
</div>

<p>we have a missing value for <code class="highlighter-rouge">archived</code> here. Well, with much poking around, I found it here:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="no">TranscriptionService</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:output_transcript</span><span class="p">).</span><span class="nf">arel</span><span class="p">.</span><span class="nf">bind_values</span>
 <span class="c1"># =&gt; [[#&lt;ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter::Column:0x007fb89daaca50 @strict=true, @collation=nil, @extra="", @name="archived", @cast_type=#&lt;ActiveRecord::Type::Boolean:0x007fb8a7a89320 @precision=nil, @scale=nil, @limit=1&gt;, @sql_type="tinyint(1)", @null=true, @default="0", @default_function=nil&gt;, false]]</span>
</code></pre>
</div>

<p>The first value here is some label for the bind value, and the last, <code class="highlighter-rouge">false</code>, is the value we actually need. And the only way I can figure out how to use this value is in ActiveRecord, not Arel, so we collect these bind_values in the inner loop (<code class="highlighter-rouge">bind_values += join_arel.bind_values</code>), and use them all in one go at the very end using</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="n">bind_values</span><span class="p">.</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="n">val</span><span class="o">|</span> <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="n">val</span><span class="p">)}</span>
</code></pre>
</div>

<p>This seems to work, though I have a very poor understanding of how robustly.</p>

<p>The last thing I’ll note about bind values is that while these bind values came from the Arel object, there are cases where you can only get them from the ActiveRecord object:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="no">TranscriptionService</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">state: </span><span class="s2">"ready"</span><span class="p">).</span><span class="nf">arel</span><span class="p">.</span><span class="nf">bind_values</span>
 <span class="c1"># =&gt; []</span>
 <span class="no">TranscriptionService</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">state: </span><span class="s2">"ready"</span><span class="p">).</span><span class="nf">bind_values</span>
 <span class="c1">#=&gt; [[#&lt;ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter::Column:0x007fb89c7c8510 @strict=true, @collation="utf8_general_ci", @extra="", @name="state", @cast_type=#&lt;ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter::MysqlString:0x007fb8a01cada8 @precision=nil, @scale=nil, @limit=255&gt;, @sql_type="varchar(255)", @null=true, @default=nil, @default_function=nil&gt;, "ready"]</span>
</code></pre>
</div>

<p>We would need to collect bind values this way if we were playing with <code class="highlighter-rouge">WHERE</code> conditions:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code> <span class="no">TranscriptionService</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">state: </span><span class="s2">"ready"</span><span class="p">).</span><span class="nf">arel</span><span class="p">.</span><span class="nf">to_sql</span>
 <span class="o">=&gt;</span> <span class="s2">"SELECT `services`.* FROM `services` WHERE `services`.`type` IN ('TranscriptionService') AND (services.deleted = 0) AND `services`.`state` = ?"</span>
</code></pre>
</div>

<p>But that’s about enough exploring of that for now. I hope to learn more about bind values and how to more robustly use them in these types of query manipulations, but I will close this post about subjoins at that. Right now I’m just psyched that I can join to subclass-specific associations from a parent class. I’ll probably only actually use the <code class="highlighter-rouge">as_subclass</code> version, because really it’s not the responsbility of the parent class to know about the subclasses’ details, but man this was a fun exercise!</p>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Your awesome title</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              Your awesome title
            
            </li>
            
            <li><a href="mailto:your-email@domain.com">your-email@domain.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jekyll"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jekyll</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/jekyllrb"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">jekyllrb</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
